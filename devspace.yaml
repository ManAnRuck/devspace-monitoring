version: v2beta1
name: monitoring

deployments:
  prometheus-stack:
    helm:
      chart:
        name: kube-prometheus-stack
        repo: https://prometheus-community.github.io/helm-charts
      values:
        grafana:
          adminPassword: prom-operator
          persistentVolume:
            existingClaim: kube-prometheus-stack-pvc
        alertmanager:
          persistentVolume:
            existingClaim: kube-prometheus-stack-pvc
        server:
          persistentVolume:
            existingClaim: kube-prometheus-stack-pvc

dev:
  grafana:
    labelSelector:
      app.kubernetes.io/name: grafana
    ports:
      - port: '3000:3000'
